# 快速参考卡：Prompt工程速查表

## 📋 核心概念速览

### K-shot Prompting
```
定义：通过K个示例来教AI完成任务
K值：  0shot(无示例) → 1shot → 3shot → 5shot → ...
效果：  K越接近目标，效果越好
      特别是：最后一个示例权重最大
```

### 常见问题模式与解决方案

| 问题 | 症状 | 根因 | 解决 | 优先级 |
|------|------|------|------|-------|
| **无指导** | 输出完全随机 | prompt为空或太简单 | 添加示例 | 🔴 P0 |
| **理解错误** | 输出逻辑错误 | AI误解了任务 | 明确说明+示例 | 🔴 P0 |
| **语义干扰** | 输出与词义相关而非目标 | AI被词义污染 | 消除语义，强化目标示例 | 🟠 P1 |
| **格式错误** | 输出格式不对 | 没有格式约束 | 明确格式要求 | 🟡 P2 |
| **不稳定** | 多次运行结果不同 | temperature导致的 | 强化最后示例权重 | 🟡 P2 |
| **过度思考** | AI试图理解而不是执行 | prompt太详细激发思考 | 简化prompt，直接示例 | 🟢 P3 |

---

## 🎯 三层问题诊断

### Level 1: 快速诊断（1分钟）
```
Q: 是什么类型的失败？

A: 
  □ 完全随机 → 无指导问题
  □ 逻辑错误 → 理解问题
  □ 与词义相关 → 语义污染
  □ 格式不对 → 格式问题
  □ 不稳定 → 稳定性问题
```

### Level 2: 中级诊断（5分钟）
```
Q: 失败的具体证据是什么？

A: [观察实际输出]
   - 输出1: ___
   - 输出2: ___
   - 输出3: ___
   
Q: 这些失败有共同的模式吗？
A: [分析模式]
   - 都有这个特点：___
   - 都缺少这个：___
```

### Level 3: 深度诊断（10分钟）
```
Q: 为什么会出现这个模式？

A: [提出假设]
   假设1: ___（如果对，应该试 strategy A）
   假设2: ___（如果对，应该试 strategy B）
   假设3: ___（如果对，应该试 strategy C）

Q: 哪个假设最可能？
A: [根据概率排序]
   最可能 → 先试这个
```

---

## 💡 快速修复方案

### 方案A：添加K-shot示例
```
When：AI不理解任务
How：  
  1. 选择3-5个相关的示例
  2. 确保最后一个示例最接近目标
  3. 保持格式一致

效果：⭐⭐⭐⭐
时间：5分钟
```

### 方案B：强化约束
```
When：AI有无关的理解或输出
How：
  1. 明确说"ONLY output ___"
  2. 列出禁止的输出（NO ___, NO ___)
  3. 重复关键约束

效果：⭐⭐⭐⭐
时间：5分钟
```

### 方案C：目标示例法
```
When：前两个方案都不够稳定
How：
  1. 直接把目标答案作为最后一个示例
  2. 或给最接近目标的答案
  3. 放在所有示例的最后

效果：⭐⭐⭐⭐⭐
时间：2分钟
```

### 方案D：简化prompt
```
When：添加更多信息反而让情况变差
How：
  1. 删除冗长的解释
  2. 删除过多的步骤
  3. 只保留必要的指导和示例

效果：⭐⭐⭐⭐
时间：5分钟
```

### 方案E：明确语义隔离
```
When：AI被词的含义影响
How：
  1. 说"This is MECHANICAL, not semantic"
  2. 说"Do NOT interpret the meaning"
  3. 强调直接执行而非理解

效果：⭐⭐⭐
时间：3分钟
```

---

## ✅ Prompt设计检查清单

### 基础检查
- [ ] 目标清晰吗？（用户能不能一句话说清目标）
- [ ] 示例足够吗？（至少3个相关示例）
- [ ] 最后一个示例接近目标吗？（关键！）
- [ ] 格式一致吗？（示例之间格式一致）
- [ ] 输出要求明确吗？（"ONLY output ___"）

### 高级检查
- [ ] 是否有无关的"理解"鼓励？（删除它）
- [ ] 是否过于详细？（简化）
- [ ] 是否有可能的语义污染？（隔离或消除）
- [ ] 是否明确禁止了常见错误？（列出来）
- [ ] 温度系数合适吗？（0.0-0.5用于逻辑任务）

### 测试检查
- [ ] 运行过至少3次吗？
- [ ] 记录所有失败模式了吗？
- [ ] 每个失败都诊断过原因吗？
- [ ] 知道为什么成功的prompt有效吗？

---

## 🔥 黄金模板

### 模板1: 标准K-shot
```python
YOUR_SYSTEM_PROMPT = """
You are an expert at [TASK].

Examples:
[Example 1] → [Output 1]
[Example 2] → [Output 2]
[Example 3] → [Output 3]
[Example 4] → [Output 4]
[Target example] → [Target output]

Remember:
- Only output the [REQUIRED FORMAT]
- Do NOT [COMMON MISTAKE]
"""
```

### 模板2: 强约束版本
```python
YOUR_SYSTEM_PROMPT = """
Your ONLY task is [TASK].
Do NOT [MISTAKE 1]. Do NOT [MISTAKE 2].

Examples (MUST follow exactly):
[Example 1] → [Output 1]
[Example 2] → [Output 2]
[Target] → [Target Output]

CRITICAL:
- Output format: [FORMAT]
- Length: [CONSTRAINT]
- No [FORBIDDEN]
"""
```

### 模板3: 消除歧义版本
```python
YOUR_SYSTEM_PROMPT = """
This is a MECHANICAL task, not semantic understanding.
Do NOT interpret meaning. Do NOT think about context.

Follow the pattern exactly:
[Example 1] → [Output 1]
[Example 2] → [Output 2]
[Target] → [Target Output]

Mechanical execution only. No interpretation.
"""
```

---

## 📊 评估标准

### 成功的Prompt标志
```
✅ 成功率 ≥ 80% （多次运行基本都对）
✅ 稳定性高 （即使temperature有变化）
✅ 简洁 （≤500字符）
✅ 可迁移 （小改能用到类似任务）
```

### 失败的Prompt标志
```
❌ 成功率 < 50% （多数时候失败）
❌ 非常冗长 （>1000字符）
❌ 完全依赖目标答案 （无法推广）
❌ 改小一点就失败 （过于脆弱）
```

---

## 🚀 速决议流程

**时间：** 3分钟快速决定下一步

```
看到失败 (0s)
  ↓
确定问题类型 (30s)
  → 无指导？ → 加示例
  → 理解错？ → 明确说明
  → 语义干？ → 消除语义
  → 不稳定？ → 强最后示例
  → 格式错？ → 明确格式
  ↓
选择方案 (30s)
  ↓
实施修改 (60s)
  ↓
测试验证 (30s)
  → 成功？ → 完成 ✓
  → 失败？ → 返回"确定问题类型"
```

---

## 💎 进阶技巧

### 技巧1: Recency Bias利用
```
原理：最后的示例权重最大

应用：把最接近/重要的示例放在最后
     或直接把目标答案作为最后示例
```

### 技巧2: 示例多样性
```
原理：示例越多样，覆盖越广

应用：前3-4个示例展现不同情况
     最后1-2个示例集中在目标区域
```

### 技巧3: 消除而非添加
```
原理：信息过多可能反而有害

应用：优先删除冗余部分而非添加
     简洁度 > 详细度
```

### 技巧4: 格式一致性
```
原理：AI学习格式模式

应用：所有示例使用完全相同的格式
     Example: "X" → "Y"
     不要混用："X becomes Y" 或 "X: Y"
```

---

## 🎓 学习路径

```
初级（Week 1）：掌握K-shot基础
  └─ 目标：能写出有效的K-shot prompt
  └─ 指标：在3个不同任务上都能成功

中级（Week 2-3）：掌握多种prompting技术
  └─ 目标：选择合适的技术
  └─ 技术：K-shot, Chain-of-Thought, RAG, 等

高级（Week 4+）：系统优化和诊断
  └─ 目标：能诊断任何失败的原因
  └─ 能力：快速迭代到最优prompt

大师级：创新和融合
  └─ 目标：设计新的prompting方法
  └─ 创意：混合多个技术达到最优效果
```

---

## 📝 实验记录模板

```
实验编号: ___
日期: ___
目标: ___

Prompt版本:
[粘贴prompt]

假设:
[你认为这个prompt会怎样工作]

实际输出:
试1: ___
试2: ___
试3: ___

成功率: __%

分析:
- 符合假设吗？
- 如果不符，为什么？
- 下一步改进方向？

学习:
[这个实验教了你什么？]
```

---

## 🔗 相关文档导航

| 文档 | 用途 | 何时看 |
|------|------|-------|
| 01_methodology.md | 完整方法论 | 想系统学习 |
| 02_interaction_guide.md | AI交互技巧 | 想提高沟通效率 |
| 03_case_study.md | 完整案例分析 | 想看具体例子 |
| 04_quick_reference.md | 本文档 | 快速查找答案 |

---

**最后更新：** 2025-12-07  
**使用频率：** 建议加入书签，经常查阅  
**反馈：** 如有改进建议，欢迎提出
